<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Now - Sole Mission</title>
    <link rel="stylesheet" href="css/book-now.css">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>
    <header class="booking-header">
        <a href="javascript:history.back()" class="back-icon">
            <img src="https://raw.githubusercontent.com/traicyyy/Sole-Mission/main/home/images/back.png" alt="Back">
        </a>
        <h1 class="header-title">BOOKING FORM</h1>
    </header>

    <div id="app">
        <div class="form-wrapper">
            <div class="form-container">
                <h2>Book a Service</h2>
                <form @submit.prevent="submitForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">First Name</label>
                            <input type="text" v-model="firstName" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Last Name</label>
                            <input type="text" v-model="lastName" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Contact Number</label>
                        <input type="tel" v-model="contactNumber" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" v-model="email" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Select Service Type</label>
                            <select v-model="serviceType" @change="updateServiceNames" required>
                                <option value="">-- Select --</option>
                                <option value="Cleaning">Cleaning</option>
                                <option value="Restoration">Restoration</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Select Service Name</label>
                            <select v-model="serviceName" required>
                                <option value="">-- Select --</option>
                                <option v-for="option in serviceOptions" :value="option">{{ option }}</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Shoe Brand & Model (Optional)</label>
                            <input type="text" v-model="shoeBrandModel">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Number of Pairs</label>
                            <input type="number" v-model.number="numItems" min="1" @input="calculateTotal" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Total Payment</label>
                            <input type="text" v-model="totalPayment" readonly>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Payment Method</label>
                            <select v-model="paymentMethod" required>
                                <option value="Cash">Cash</option>
                                <option value="Gcash">Gcash</option>
                                <option value="Bank Transfer">Bank Transfer</option>
                                <option value="PayMaya">PayMaya</option>
                            </select>
                        </div>
                    </div>
                    
                    <label>Delivery Type</label>
                    <select v-model="deliveryType" required>
                        <option value="Store Pickup">Store Pickup</option>
                        <option value="Door to Door">Door to Door</option>
                    </select>
                    
                    <div v-if="deliveryType === 'Door to Door'">
                        <h4>Enter Delivery Address</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>Street:</label>
                                <input type="text" v-model="address.street" required />
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>City:</label>
                                <input type="text" v-model="address.city" required />
                            </div>
                            
                            <div class="form-group">
                                <label>Postal Code:</label>
                                <input type="text" v-model="address.postalCode" required />
                            </div>
                        </div>
                    </div>
                    
                    <label>Message / Inquiry (Optional)</label>
                    <textarea v-model="message" placeholder="Leave a message..."></textarea>
                    
                    <div class="terms-box-container">
                        <h3>Terms and Conditions:</h3>
                        <div class="terms-box">
                            <p><strong>By availing Sole Missionâ€™s Restoration service, you agree to the following terms:</strong></p>
                            <p>1. You may cancel before the process starts, but any downpayment made is non-refundable once work begins.</p>
                            <p>2. Sole Mission is not responsible for damages during third-party courier transport.</p>
                            <p>3. Shoes left unclaimed for 2 months after completion may be disposed of or sold.</p>
                            <p>4. We take precautions but are not liable for restoration-related damages due to pre-existing conditions.</p>
                            <p>5. Final results may not be factory-finish.</p>
                        </div>
                        <div class="terms-container">
                            <input type="checkbox" id="agreeToTerms" v-model="agreeToTerms" required>
                            <label for="agreeToTerms">I agree to the Terms and Conditions</label>
                        </div>
                    </div>
                    
                    <button type="submit">Submit Booking</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Booking Confirmation Modal -->
    <div v-if="showModal" class="modal-overlay">
        <div class="modal">
            <h2>Booking Confirmed!</h2>
            <p class="confirmation-message">
                Your booking reference: <strong>{{ bookingReference }}</strong>
            </p>
            <p>Thank you for choosing our service. You will receive a confirmation email shortly.</p>
            <div class="modal-buttons">
                <button @click="closeModal">Close</button>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/book-now.js"></script>
    <script src="js/script.js"></script>
</body>
</html>
